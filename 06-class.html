<section id="class">

    <section>
        <h2>Diagramme de classe</h2>
        <h3>Catégorie : Structure</h3>
    </section>

    <section>
        <h3>Présentation</h3>
        <blockquote>
            <p>The purpose of a Class is to specify a classification of objects and to specify the Features that characterize the structure and behavior of those objects.</p>
            <cite>- Object Management Group</cite>
        </blockquote>
        <blockquote>
            <p>Le diagramme de classes est un schéma utilisé en génie logiciel pour présenter les <strong>classes et les interfaces</strong> des systèmes ainsi que les différentes <strong>relations</strong> entre celles-ci.</p>
            <cite>- Wikipedia</cite>
        </blockquote>
    </section>

    <section>
        <h3>Principaux éléments graphiques</h3>
        <table class="table-elements">
            <thead>
            <tr>
                <th>Nom</th>
                <th>Représentation</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>Class</td>
                <td>
                    <img src="assets/images/class-class.png" alt="Class">
                    <img src="assets/images/class-class-abstract.png" alt="Abstract Class">
                    <img src="assets/images/class-interface.png" alt="Interface">
                </td>
                <td>
                    <p>Elément permettant d'identifier une classe du diagramme.</p>
                    <p>Si le nom de la classe est en italic et précédé de &lt;&lt;Abstract&gt;&gt;, il s'agit alors d'une classe abstraite.</p>
                    <p>Si le nom de la classe est précédé de &lt;&lt;Interface&gt;&gt;, il s'agit alors d'une interface.</p>
                </td>
            </tr>
            <tr>
                <td>Attribute</td>
                <td><img src="assets/images/class-attribute.png" alt="Attribute"></td>
                <td>
                    <p>Attribut associé à une classe. Les symboles suivants permettent de définir la visibilité :</p>
                    <ul>
                        <li>+ public</li>
                        <li>- private</li>
                        <li># protected</li>
                        <li>~ package</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>Operations (Method)</td>
                <td><img src="assets/images/class-operation.png" alt="Operations"></td>
                <td>Méthode associée à une classe.</td>
            </tr>
            </tbody>
        </table>
    </section>

    <section>
        <h3>Principaux éléments graphiques</h3>
        <table class="table-elements">
            <thead>
            <tr>
                <th>Nom</th>
                <th>Représentation</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>Association</td>
                <td><img src="assets/images/class-association.png" alt="Association"></td>
                <td>Réprésente une relation logique entre deux classes. Souvent impliqué par un <strong>attribut</strong> de la classe.</td>
            </tr>
            <tr>
                <td>Unidirectional association</td>
                <td><img src="assets/images/class-association-unidirectional.png" alt="Unidirectional association"></td>
                <td>Réprésente une relation logique à sens unique entre deux classes.</td>
            </tr>
            <tr>
                <td>Dependency</td>
                <td><img src="assets/images/class-dependency.png" alt="Dependency"></td>
                <td>Représente une dépendance entre deux classes. Souvent impliqué par le type d'un paramètre ou du retour d'une <strong>méthode</strong>.</td>
            </tr>
            </tbody>
        </table>
    </section>

    <section>
        <h3>Principaux éléments graphiques</h3>
        <p>Il est possible d'utiliser des cardinalités pour préciser le nombre d'entités associées.</p>
        <div class="container">
            <div class="col">
                <table style="font-size: 0.8em;">
                    <tbody>
                    <tr>
                        <td>0..1</td>
                        <td>Zéro ou une instance</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Une et une seule instance</td>
                    </tr>
                    <tr>
                        <td>0..* ou *</td>
                        <td>Zéro ou plusieurs instances</td>
                    </tr>
                    <tr>
                        <td>1..*</td>
                        <td>Une ou plusieurs instances</td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="col">
                <img src="assets/images/class-association-multiplicity.png" alt="Cardinalités exemple">
                <p><code class="language-php">Class1</code> est lié à 1 <code class="language-php">Class2</code></p>
                <p><code class="language-php">Class2</code> est lié à * <code class="language-php">Class1</code></p>
            </div>
        </div>
        <footer>
            <a href="#" class="warning">Le sens des cardinalité est inversé par rapport à Merise !</a>
        </footer>
    </section>

    <section>
        <h3>Principaux éléments graphiques</h3>
        <table class="table-elements">
            <thead>
            <tr>
                <th>Nom</th>
                <th>Représentation</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>Inheritance</td>
                <td><img src="assets/images/class-inheritance.png" alt="Inheritance"></td>
                <td>Représente un héritage entre deux classes.</td>
            </tr>
            <tr>
                <td>Implementation</td>
                <td><img src="assets/images/class-implementation.png" alt="Implementation"></td>
                <td>Représente l'implémentation d'une interface par une classe.</td>
            </tr>
            <tr>
                <td>Aggregation</td>
                <td><img src="assets/images/class-aggregation.png" alt="Aggregation"></td>
                <td>Représente une relation de subordination entre deux classes. Cela permet d'identifier une classe qui contiendra une collection d'autres classes.</td>
            </tr>
            <tr>
                <td>Composition</td>
                <td><img src="assets/images/class-composition.png" alt="Composition"></td>
                <td>Représente une relation forte entre deux classes. Si Class1 est détruite, Class2 sera également détruite.</td>
            </tr>
            </tbody>
        </table>
    </section>

    <section>
        <h3>Forward engineering : Class</h3>
        <div class="container">
            <div class="col">
                <img src="assets/images/class-example.png" alt="Class Person" style="min-width: 250px;">
            </div>
            <div class="col">
                <div class="tabs-container">
                    <ul class="tabs-buttons-container">
                        <li>
                            <button class="tab-button active" data-target="tab-php">PHP</button>
                        </li>
                        <li>
                            <button class="tab-button" data-target="tab-java">Java</button>
                        </li>
                    </ul>
                    <div class="tabs">
                        <div class="tab-php active">
                            <pre style="max-height: 400px;"><code class="language-php">class Person {
    private string $firstname;
    private string $lastname;
    private \DateTime $birthdate;

    public function setFirstname(string $firstname): self {
        $this->firstname = $firstname;
        return $this;
    }

    public function setLastname(string $lastname): self {
        $this->lastname = $lastname;
        return $this;
    }

    public function getFullname(): string {
        return $this->firstname . " " . $this->lastname;
    }

    public function setBirthdate(\DateTime $birthdate): self {
        $this->birthdate = $birthdate;
        return $this;
    }

    public function getAge(): int {
        return (new \DateTime())->diff($this->birthdate)->y;
    }
}</code></pre>
                        </div>
                        <div class="tab-java">
<pre style="max-height: 400px;"><code class="language-java">import java.util.Date;

public class Person {
    private String firstname;
    private String lastname;
    private Date birthdate;

    public Person setFirstname(String firstname) {
        this.firstname = firstname;
        return this;
    }

    public Person setLastname(String lastname) {
        this.lastname = lastname;
        return this;
    }

    public String getFullname() {
        return this.firstname + " " + this.lastname;
    }

    public Person setBirthdate(Date birthdate) {
        this.birthdate = birthdate;
        return this;
    }

    public int getAge() {
        // TODO: Implement age calculation
        return 0;
    }
}</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer>
            <a href="#" class="info" style="font-size: 0.7em;">La classe <code class="language-php">Person</code> comprend 3 attributs privés afin de respecter le principe d'<strong>encapsulation</strong></a>
            <a href="#" class="info" style="font-size: 0.7em;">Les setters retournent l'instance de la classe afin de mettre en place le design pattern <strong>Fluent</strong></a>
        </footer>
    </section>

    <section>
        <h3>Forward engineering : Association</h3>
        <div class="container">
            <div class="col">
                <img src="assets/images/class-association-example.png" alt="Association">
            </div>
            <div class="col">
<pre><code class="language-php">class Order {
    private Customer $customer;
}</code></pre>
<pre><code class="language-php">class Customer {
    private string $firstName;
    private string $lastLame;
    private array $orders;
}</code></pre>
            </div>
        </div>
    </section>

    <section>
        <h3>Forward engineering : Unidirectional Association</h3>
        <div class="container">
            <div class="col">
                <img src="assets/images/class-association-unidirectional-example.png" alt="Unidirectional Association">
            </div>
            <div class="col">
<pre><code class="language-php">class Order {
    private Customer $customer;
}</code></pre>
                <pre><code class="language-php">class Customer {
    private string $firstName;
    private string $lastLame;
}</code></pre>
            </div>
        </div>
    </section>

    <section>
        <h3>Forward engineering : Association Dependency</h3>
        <img src="assets/images/class-dependency-example.png" alt="Association Dependency">
<pre><code class="language-php">class Invoice {
    private string $fileName;

    public function generatePdf(Order $order): void {
        // TODO: Generate PDF file from Order object
    }
}</code></pre>
                <pre><code class="language-php">class Order {
    private Customer $customer;
}</code></pre>
    </section>

    <section>
        <h3>Forward engineering : Inheritance</h3>
        <div class="container">
            <div class="col">
                <img src="assets/images/class-inheritance-example.png" alt="Inheritance example">
            </div>
            <div class="col">
<pre style="max-height: 400px;"><code class="language-php">class Person {
    public string $firstname;
    public string $lastname;

    public function getFullname(): string {
        return $this->firstname . " " . $this->lastname;
    }
}</code></pre>
<pre style="max-height: 400px;"><code class="language-php">class Employee extends Person {
    public float $salary;

    public function getFullname(): string {
        return parent::getFullname() . " (employee)";
    }
}</code></pre>
            </div>
        </div>
        <footer>
            <a href="#" class="info" style="font-size: 0.9em;">La méthode <code class="language-php">getFullname()</code> est surchargée par la classe <code class="language-php">Employee</code></a>
        </footer>
    </section>

    <section>
        <h3>Forward engineering : Implementation</h3>
        <div class="container">
            <div class="col">
                <img src="assets/images/class-implementation-example.png" alt="Implementation example">
            </div>
            <div class="col">
<pre style="max-height: 400px;"><code class="language-php">interface Weightable {
    public function getWeight(): float;
}</code></pre>
<pre><code class="language-php">class Person implements Weightable {
    public string $firstname;
    public string $lastname;
    public float $weight;

    public function getWeight(): float {
        return $this->weight;
    }
}</code></pre>
            </div>
        </div>
    </section>

    <section>
        <h3>Forward engineering : Implementation</h3>
        <p>L'exemple précédent pourrait permettre de définir plusieurs classes implémentant l'interface <code class="language-php">Weightable</code>.</p>
        <p>Dans le cas d'une compagnie aérienne, nous pourrions par exemple avoir une autre classe <code class="language-php">Lugguage</code> implémentant également l'interface <code class="language-php">Weightable</code></p>
        <p>Cela permettrait ensuite d'écrire une fonction qui permettrait de calculer le poids total transporté :</p>
<pre style="max-height: 400px;"><code class="language-php">function getTotalWeight(Collection&lt;Weightable&gt; $items) {
    $total = 0;
    foreach($items as $item) {
        $total += $item->getWeight();
    }
    return $total;
}</code></pre>
        <footer>
            <a href="#" class="info">C'est le principe du polymorphisme qui utilisé</a>
        </footer>
    </section>

    <section>
        <h3>Forward engineering : Aggregation</h3>
        <div class="container">
            <div class="col">
                <img src="assets/images/class-aggregation-example.png" alt="Aggregation">
            </div>
            <div class="col">
<pre><code class="language-php">class Car {
    public string $model;
    private Engine $engine;

    public function __construct(Engine $engine)
    {
        $this->engine = $engine;
    }
}</code></pre>
<pre><code class="language-php">class Engine {
    public int $power;
    public string $energy;
}</code></pre>
            </div>
        </div>
        <p>Si la voiture a un accident, le moteur peut être retiré et installé sur un autre véhicule.</p>
        <footer>
            <a href="#" class="info">On utilise l'injection de dépendance pour définir le moteur</a>
        </footer>
    </section>

    <section>
        <h3>Forward engineering : Composition</h3>
        <div class="container">
            <div class="col">
                <img src="assets/images/class-composition-example.png" alt="Composition">
            </div>
            <div class="col">
<pre><code class="language-php">class Person implements Weightable {
    public string $firstname;
    public string $lastname;
    private Head $head;

    public function __construct()
    {
        $this->head = new Head();
    }
}</code></pre>
<pre><code class="language-php">class Head {
    public string $hairColor;
}</code></pre>
            </div>
        </div>
        <footer>
            <a href="#" class="info">L'instance de <code class="language-php">Head</code> est créée dans le constructeur de <code class="language-php">Person</code></a>
        </footer>
    </section>

    <section>
        <h3>Principes de la POO</h3>
        <p><strong>Composition over inheritance</strong> : Préférer utiliser le principe de composition plutôt que l'héritage</p>
        <p><strong>Program to an 'interface', not an 'implementation'</strong> : Favoriser l'utilisation d'interfaces plutôt que des classes concrètes.</p>
    </section>

    <section>
        <h3>SOLID</h3>
        <p><strong>Single-responsibility principle</strong> : Chaque classe ne doit avoir qu'une seule responsabilité.</p>
        <p><strong>Open–closed principle</strong> : Le code doit être ouvert à l'extension mais fermé à la modification.</p>
        <p><strong>Liskov substitution principle</strong> : Une fonction utilisant la référence d'un type doit pouvoir utiliser utiliser les références de ses sous-types sans les connaître.</p>
        <p><strong>Interface segregation principle</strong> : Plusieurs interfaces spécifiques sont meilleures qu'une seule interface générique.</p>
        <p><strong>Dependency inversion principle</strong> : Dépendre des abstractions et non des implémentations.</p>
    </section>

    <section>
        <h3>Exemple</h3>
        <img src="assets/images/diagram-class-example.png" alt="Diagramme de classe">
    </section>

    <section>
        <h3>Exercice</h3>
        <div class="instructions">
            <ol>
                <li>Créer un diagramme de classe permettant de <strong>choisir un algorithme de température</strong> (l'unité de base sera le celsius)</li>
                <li>Ecrire ensuite le <strong>code source correspondant</strong> en utilisant le langage orienté objet de votre choix</li>
            </ol>
        </div>
        <figure>
            <img src="assets/images/class-design-pattern-strategy.png" alt="Strategy">
            <figcaption>Design pattern Strategy</figcaption>
        </figure>
    </section>

    <section>
        <h3>Exercice</h3>
        <p>Créer un diagramme de classe pour une application de gestion d'une école.</p>
        <div class="instructions">
            <ol>
                <li>Il y aura 3 types d'utilisateurs (étudiant, enseignant et administration)</li>
                <li>Les étudiants auront des cours d'une matière, dans une salle avec un enseignant</li>
                <li>Les étudiants pourront avoir des notes associées à une matière</li>
                <li>Chaque salle pourra contenir zéro ou plusieurs ordinateurs</li>
            </ol>
        </div>
    </section>

    <section>
        <h3>Exercice (suite)</h3>
        <p>Dans le but de réaliser des économie d'énergie, l'école souhaiterait ajuster la chaleur de chaque salle en fonction du nombre d'étudiants et des ordinateurs présent à l'intérieur.</p>
        <p>Pour cela, elle souhaiterait pouvoir utiliser une librairie déjà existante :</p>
        <pre><code class="language-php">interface Heatable {
    public function getWatts(): float;
}</code></pre>
        <pre><code class="language-php">interface Sizeable {
    public function getHeight(): int;
    public function getWidth(): int;
    public function getLength(): int;
}</code></pre>
        <pre><code class="language-php">function getHeatingPower(Sizeable $room, Collection&lt;Heatable&gt; $elements) {
    $space = $room->getHeight() * $room->getWidth() * $room->getLength();
    $totalWatts = 0;
    foreach ($element in $elements) { $totalWatts += $element->getWatts(); }
    return ($space * 20) - $totalWatts;
}</code></pre>
        <footer>
            <a href="https://energieplus-lesite.be/evaluer/bureautique2/evaluer-les-charges-thermiques-dues-aux-equipements/" class="info" target="_blank">Personne ~ 70W / Ordinateur ~ 80W</a>
        </footer>
    </section>

    <section>
        <h3>Exercice</h3>
        <div class="instructions">
            <ol>
                <li>Créez un diagramme de classe pour représenter des <strong>produits</strong> ayant un prix</li>
                <li>Si le prix d'un produit est mis à jour, les <strong>utilisateurs abonnés</strong> au produit doivent être <strong>notifiés</strong></li>
                <li>Utilisez le design pattern <strong>Observer</strong> pour gérer le système de notification</li>
                <li>Ecrire ensuite le <strong>code source correspondant</strong> en utilisant le langage orienté objet de votre choix</li>
            </ol>
        </div>
    </section>

    <section>
        <h3>Exercice</h3>
        <div class="instructions">
            <ol>
                <li>Créez un diagramme de classe pour gérer des <strong>dossiers et des fichiers</strong></li>
                <li>Les dossiers et les fichiers doivent avoir un <strong>nom</strong> ainsi qu'une <strong>date de création</strong></li>
                <li>Un dossier peut contenir des <strong>sous-dossiers et/ou des fichiers</strong></li>
                <li>Un fichier à une <strong>extension</strong></li>
                <li>Il est possible d'<strong>ouvrir un dossier</strong> (pour récupérer une liste des sous-dossiers + fichiers) <strong>ou un fichier</strong> (récupéré au format txt)</li>
                <li>Il est possible de connaître le <strong>poid d'un fichier</strong> et de <strong>calculer le poid d'un dossier</strong></li>
                <li>Ecrire ensuite le <strong>code source correspondant</strong> en utilisant le langage orienté objet de votre choix</li>
            </ol>
        </div>
        <footer>
            <a href="#" class="info">Vous pouvez utiliser le design pattern <strong>Composite</strong></a>
        </footer>
    </section>

    <section>
        <h3>Exercice</h3>
        <p>L'entreprise StarBuml qui vend des cafés souhaite totalement informatiser ses processus. De la prise de la commande à la livraison en passant par la préparation, l'ensemble de ces tâches devront être enregistrées dans un système d'information.</p>
        <p>Voici le fonctionnement actuel :</p>
        <div class="instructions">
            <ol>
                <li>Un client arrive dans le café et fait la queue pour passer sa commande</li>
                <li>Il passe ensuite sa commande auprès du caissier</li>
                <li>Le caissier demande alors au client de payer pendant que son café est préparé</li>
                <li>Si la commande est simple (expresso, café allongé...), c'est le caissier qui prépare le café</li>
                <li>Sinon, c'est un "Barista" qui va s'en occuper</li>
                <li>Une fois le café prêt et que la commande est payée, il est alors livré au client</li>
            </ol>
        </div>
    </section>

    <section>
        <h3>Exercice (suite)</h3>
        <p>Vous allez donc schématiser l'application qui sera réalisée en présentant :</p>
        <div class="instructions">
            <ol>
                <li>Un diagramme de cas d'utilisation</li>
                <li>Un diagramme d'activité</li>
                <li>Un diagramme de séquence présentant l'enregistrement en base de données de la commande et le calcul du montant à payer</li>
                <li>Un diagramme de classe qui utilisera le design pattern <strong>Decorator</strong> afin d'ajouter des ingrédients au café (sucre, lait, chocolat...) et ainsi calculer le coût de la commande</li>
            </ol>
        </div>
    </section>

</section>
